!function(global,undefined){function normPath(path){for(path=path.replace(DOT_RE,"/"),path=path.replace(MULTI_SLASH_RE,"$1/");path.match(DOUBLE_DOT_RE);)path=path.replace(DOUBLE_DOT_RE,"/");return path}function dirname(path){return path.match(/[^?#]*\//)[0]}function absSrc(script){return script.hasAttribute?script.src:script.getAttribute("src",4)}function getCurrentScript(){if(document.currentScript)return absSrc(document.currentScript);if(isSync)return currentScript;try{throwAnError()}catch(e){var stack=e.stack;if(e.stacktrace&&(stack=e.toString()),stack){var reg=/(http|https|file):\/\/[^ ]+\.js/g,matches=stack.match(reg);return matches.pop()}}for(var i=0,l=scripts.length;l>i;++i){var script=scripts[i];if("interactive"===script.readyState)return absSrc(script)}return isSync=!0,currentScript}function id2Uri(id,referer){var key,uri=config.alias[id]||id,paths=config.paths,vars=config.vars;for(key in paths)if(0===uri.indexOf(key+"/")){uri=uri.replace(key,paths[key]);break}for(key in vars)uri.indexOf("{"+key+"}")>=0&&(uri=uri.replace("{"+key+"}",vars[key]));return referer&&0===uri.indexOf(".")?uri=normPath(dirname(referer)+uri):0===uri.indexOf("//")?uri=location.protocol+uri:0===uri.indexOf("/")?uri=location.href.replace(/^(.*?\/\/.*?)\/.*/,"$1")+uri:PROTOCOL_RE.test(uri)||(uri=normPath(config.base+uri)),"#"===uri.slice(-1)?uri=uri.substring(0,uri.length-1):uri.indexOf("?")<0&&!/(\.js(on)?|\.css|\/)$/.test(uri)&&(uri+=".js"),uri}function uri2Id(uri){var id=uri.replace(config.base,"");return".js"===id.slice(-3)&&(id=id.substring(0,id.length-3)),id}function parseMap(uri){for(var key in uriMap)for(var list=uriMap[key],i=list.length-1;i>=0;--i)if(list[i]===uri)return key;return uri}function loadModule(uri){var module=moduleMap[uri];if(module===undefined&&(module=moduleMap[uri]={id:uri2Id(uri),uri:uri,factory:null,exports:null,dependencies:null,_waitings:[],_remains:0}),config.debug||(uri=parseMap(uri)),getCurrentScript()&&isSync)return syncQueue.push(uri),module;if(loadedMap[uri])return syncQueue.length&&loadModule(syncQueue.shift()),module;loadedMap[uri]=!0;var re,loader=JSLoader,loaders=config.loaders;for(var key in loaders)if(re=new RegExp("\\."+key+"(\\?|$)"),re.test(uri)){loader=loaders[key];break}return currentScript=uri,setTimeout(function(){loader.call(null,uri,function(exports){currentScript="",null===module.exports&&(module.exports=exports||{},emitload(module)),syncQueue.length&&loadModule(syncQueue.shift())})}),module}function JSLoader(uri,callback){var node=document.createElement("script");node.src=uri,node.charset=config.charset,node.async=!0,node.onload=node.onerror=node.onreadystatechange=function(){(!node.readyState||/loaded|complete/.test(node.readyState))&&(node.onload=node.onerror=node.onreadystatechange=null,head.removeChild(node),node=null,callback())},head.insertBefore(node,head.firstChild)}function async(ids,callback,referer){"string"==typeof ids&&(ids=[ids]);for(var depUri,depModule,deps=[],remains=ids.length,i=ids.length-1;i>=0;--i)depUri=id2Uri(ids[i],referer),depModule=loadModule(depUri),callback&&(depModule._remains===undefined?--remains:depModule._waitings.push(callback),deps.unshift(depUri));callback&&(callback._deps=deps,callback._remains=ids.length,0===remains&&emitCallback(callback))}function requireFactory(uri){function require(id){var module=moduleMap[id2Uri(id,uri)];return module?module.exports:void 0}return require.resolve=function(id){return id2Uri(id,uri)},require.async=function(ids,callback){async(ids,callback,uri)},require}function emitCallback(callback){for(var args=[],deps=callback._deps,i=deps.length-1;i>=0;--i)args.unshift(moduleMap[deps[i]].exports);callback.apply(null,args),delete callback._deps,delete callback._remains}function emitload(module){var require,exports,waiting,uri=module.uri,factory=module.factory,waitings=module._waitings;"function"==typeof factory&&(require=requireFactory(uri),exports=factory(require,module.exports,module),module.exports=exports||module.exports);for(var i=waitings.length-1;i>=0;--i)waiting=waitings[i],0===--waiting._remains&&("function"==typeof waiting?emitCallback(waiting):emitload(waiting));delete module._waitings,delete module._remains}function parseDeps(factory){var re=/(?:[^\$\w\.])require\( *['"]([^'"]+)['"] *\)/g,code=factory.toString(),deps=[];return code.replace(re,function(_,$1){deps.push($1)}),deps}function saveModule(uri,factory){var exports,deps,module=moduleMap[uri];"function"==typeof factory?(exports={},deps=parseDeps(factory)):(exports=factory,deps=[]),module.factory=factory,module.exports=exports,module.dependencies=deps,module._remains=deps.length;for(var depUri,depModule,i=deps.length-1;i>=0;--i)depUri=id2Uri(deps[i],uri),depModule=loadModule(depUri),depModule._remains===undefined?--module._remains:depModule._waitings.push(module);0===module._remains&&emitload(module)}if(!global.gojs){var gojs=global.gojs={version:"1.2.5"},DOT_RE=/\/\.\//g,MULTI_SLASH_RE=/([^:/])\/+\//g,DOUBLE_DOT_RE=/\/[^/]+\/\.\.\//,PROTOCOL_RE=/^(http:|https:|file:)?\/\//,config={base:"",map:{},vars:{},alias:{},paths:{},loaders:{},preload:[],debug:!1,charset:"utf-8"},uriMap={},scripts=document.scripts,gojsNode=document.getElementById("gojsnode")||scripts[scripts.length-1],gojsSrc=absSrc(gojsNode);gojs.config=function(data){if(data===undefined)return config;for(var key in data)config[key]=data[key]||config[key];var base=config.base;if(PROTOCOL_RE.test(base)?0===base.indexOf("//")&&(base=location.protocol+base):base=dirname(location.href)+base,"/"!==base.slice(-1)&&(base+="/"),config.base=base,!config.debug){var idList,uriList,idMap=config.map;for(var id in idMap){idList=idMap[id],uriList=[];for(var i=idList.length-1;i>=0;--i)uriList.unshift(id2Uri(idList[i],gojsSrc));uriMap[id2Uri(id,gojsSrc)]=uriList}}},gojs.init=function(ids,callback){async(config.preload,function(){async(ids,callback)},gojsSrc)},gojs.config({base:gojsNode.getAttribute("data-base"),debug:"true"===gojsNode.getAttribute("data-debug")});var moduleMap={},loadedMap={},syncQueue=[],isSync=!1,currentScript="",head=document.head||document.getElementsByTagName("head")[0];global.define=function(factory){var uri=getCurrentScript();if(!config.debug){var index,list=uriMap[uri];list&&(index=list.index||0,uri=list[index],list.index=index+1)}saveModule(uri,factory)},global.define.cmd={},gojs.cache=moduleMap;var main=gojsNode.getAttribute("data-main");main&&gojs.init(main)}}(this);