!function(global,undefined){function normPath(path){for(path=path.replace(DOT_RE,"/"),path=path.replace(MULTI_SLASH_RE,"$1/");path.match(DOUBLE_DOT_RE);)path=path.replace(DOUBLE_DOT_RE,"/");return path}function dirname(path){return path.match(/[^?#]*\//)[0]}function absSrc(script){return script.hasAttribute?script.src:script.getAttribute("src",4)}function getCurrentScript(){if(document.currentScript)return absSrc(document.currentScript);if(isSync)return currentScript;try{throwAnError()}catch(e){var stack=e.stack;if(e.stacktrace&&(stack=e.toString()),stack){var reg=/(http|https|file):\/\/[^ ]+\.js/g,matches=stack.match(reg);return matches.pop()}}for(var i=0,l=scripts.length;l>i;++i){var script=scripts[i];if("interactive"===script.readyState)return absSrc(script)}return isSync=!0,currentScript}function id2Uri(id,referer){var uri=id;return referer&&0===id.indexOf(".")?uri=normPath(dirname(referer)+id):PROTOCOL_RE.test(id)?0===uri.indexOf("//")&&(uri=document.location.protocol+uri):uri=normPath(base+id),"#"===uri.slice(-1)?uri=uri.substring(0,uri.length-1):/\.js($|\?)/.test(uri)||(uri+=".js"),uri}function uri2Id(uri){var id=uri.replace(base,"");return".js"===id.slice(-3)&&(id=id.substring(0,id.length-3)),id}function resolveUriMap(uri){for(var key in uriMap)for(var list=uriMap[key],i=0,l=list.length;l>i;++i)if(list[i]===uri)return key;return uri}function loadModule(uri){var module=moduleMap[uri];if(module===undefined&&(module=moduleMap[uri]={id:uri2Id(uri),uri:uri,factory:null,exports:null,dependencies:null,_waitings:[],_remains:0}),config.debug||(uri=resolveUriMap(uri)),getCurrentScript()&&isSync)return syncQueue.push(uri),module;if(loadedMap[uri])return syncQueue.length&&loadModule(syncQueue.shift()),module;loadedMap[uri]=!0;var script;return script=document.createElement("script"),script.src=currentScript=uri,script.charset=config.charset,script.async=!0,setTimeout(function(){script.onload=script.onreadystatechange=function(){(!script.readyState||/loaded|complete/.test(script.readyState))&&(script.onload=script.onreadystatechange=null,head.removeChild(script),script=null,currentScript="",null===module.exports&&emitload(module),syncQueue.length&&loadModule(syncQueue.shift()))},head.insertBefore(script,head.firstChild)}),module}function async(ids,callback,referer){var depUri,depModule,deps=[];"string"==typeof ids&&(ids=[ids]),callback._deps=deps,callback._remains=ids.length;for(var i=0,l=ids.length;l>i;++i)depUri=id2Uri(ids[i],referer),depModule=loadModule(depUri),depModule._remains===undefined?--module._remains:depModule._waitings.push(callback),deps.push(depUri);0===callback._remains&&emitCallback(callback)}function requireFactory(uri){var require=function(id){var uri=id2Uri(id,uri);return moduleMap[uri].exports};return require.resolve=function(id){return id2Uri(id,uri)},require.async=function(ids,callback){async(ids,callback,uri)},require}function emitCallback(callback){for(var args=[],deps=callback._deps,i=0,l=deps.length;l>i;++i)args.push(moduleMap[deps[i]].exports);callback.apply(null,args),delete callback._deps,delete callback._remains}function emitload(module){var require,exports,waiting,uri=module.uri,factory=module.factory,waitings=module._waitings;"function"==typeof factory&&(require=requireFactory(uri),exports=factory(require,module.exports,module),module.exports=exports||module.exports);for(var i=0,l=waitings.length;l>i;++i)waiting=waitings[i],0===--waiting._remains&&("function"==typeof waiting?emitCallback(waiting):emitload(waiting));delete module._waitings,delete module._remains}function parseDeps(factory){for(var re=/(^|\b)(?!_)require\( *[\'\"][^\'\"]+[\'\"] *\)/g,code=factory.toString(),deps=code.match(re)||[],i=0,l=deps.length;l>i;++i)deps[i]=deps[i].replace(/require\( *[\'\"]([^\'\"]+)[\'\"] *\)/,"$1");return deps}function saveModule(uri,factory){var exports,deps,module=moduleMap[uri];"function"==typeof factory?(exports={},deps=parseDeps(factory)):(exports=factory,deps=[]),module.factory=factory,module.exports=exports,module.dependencies=deps,module._remains=deps.length;for(var depUri,depModule,i=0,l=deps.length;l>i;++i)depUri=id2Uri(deps[i],uri),depModule=loadModule(depUri),depModule._remains===undefined?--module._remains:depModule._waitings.push(module);0===module._remains&&emitload(module)}if(!global.gojs){var base,gojs=global.gojs={version:"1.2.2"},DOT_RE=/\/\.\//g,MULTI_SLASH_RE=/([^:/])\/+\//g,DOUBLE_DOT_RE=/\/[^/]+\/\.\.\//,PROTOCOL_RE=/^(http:|https:|file:)?\/\//,config={map:{},base:"",main:"",preload:[],debug:!1,charset:"utf-8"},uriMap={},scripts=document.scripts,goScript=scripts[scripts.length-1],dataset=goScript.dataset;if(gojs.config=function(data){if(data===undefined)return config;for(var key in config)config[key]=data[key]||config[key];if(base=config.base,PROTOCOL_RE.test(base)?0===base.indexOf("//")&&(base=document.location.protocol+base):base=dirname(document.location.href)+base,"/"!==base.slice(-1)&&(base+="/"),!config.debug){var idList,uriList,idMap=config.map;for(var id in idMap){idList=idMap[id],uriList=[];for(var i=0,l=idList.length;l>i;++i)uriList.push(id2Uri(idList[i]));uriMap[id2Uri(id)]=uriList}}},gojs.init=function(main){main&&gojs.config({main:main}),async(config.preload,function(){loadModule(id2Uri(config.main,absSrc(goScript)))})},dataset===undefined){dataset={};for(var attrs=goScript.attributes,i=0,l=attrs.length;l>i;++i){var item=attrs[i],nodeName=item.nodeName,nodeValue=item.nodeValue;0===nodeName.indexOf("data-")&&(dataset[nodeName.replace("data-","")]=nodeValue)}}gojs.config(dataset);var moduleMap={},loadedMap={},syncQueue=[],isSync=!1,currentScript="",head=document.head||document.getElementsByTagName("head")[0];global.define=function(factory){var uri=getCurrentScript();if(!config.debug){var index,list=uriMap[uri];list&&(index=list.index||0,uri=list[index],list.index=index+1)}saveModule(uri,factory)},global.define.cmd={},config.main&&gojs.init(),gojs.loadModule=loadModule}}(this);